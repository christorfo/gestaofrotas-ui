<div class="form-container">
  <h2>{{ isEditMode ? 'Editar Veículo' : 'Cadastrar Novo Veículo' }}</h2>

  <form (ngSubmit)="onSubmit()" #vehicleForm="ngForm">

    <div class="form-group">
      <label for="placa">Placa</label>
      <input type="text" id="placa" name="placa" [(ngModel)]="veiculo.placa" required mask="SSS-0S00"
        #placaInput="ngModel">
      <div *ngIf="placaInput.invalid && (placaInput.dirty || placaInput.touched)" class="error-message">
        <div *ngIf="placaInput.errors?.['required']">A placa é obrigatória.</div>
        <div *ngIf="placaInput.errors?.['mask']">Por favor, preencha a placa completamente.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="modelo">Modelo</label>
      <input type="text" id="modelo" name="modelo" [(ngModel)]="veiculo.modelo" required #modeloInput="ngModel">
      <div *ngIf="modeloInput.invalid && (modeloInput.dirty || modeloInput.touched)" class="error-message">
        <div *ngIf="modeloInput.errors?.['required']">O modelo é obrigatório.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="tipo">Tipo</label>
      <input type="text" id="tipo" name="tipo" [(ngModel)]="veiculo.tipo" required #tipoInput="ngModel">
      <div *ngIf="tipoInput.invalid && (tipoInput.dirty || tipoInput.touched)" class="error-message">
        <div *ngIf="tipoInput.errors?.['required']">O tipo é obrigatório.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="ano">Ano</label>
      <input type="number" id="ano" name="ano" [(ngModel)]="veiculo.ano" required min="1980" max="2099"
        #anoInput="ngModel">
      <div *ngIf="anoInput.invalid && (anoInput.dirty || anoInput.touched)" class="error-message">
        <div *ngIf="anoInput.errors?.['required']">O ano é obrigatório.</div>
        <div *ngIf="anoInput.errors?.['min'] || anoInput.errors?.['max']">Por favor, insira um ano válido.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="quilometragem">Quilometragem Atual</label>
      <input type="number" id="quilometragem" name="quilometragem" [(ngModel)]="veiculo.quilometragemAtual" required
        min="0" #kmInput="ngModel">
      <div *ngIf="kmInput.invalid && (kmInput.dirty || kmInput.touched)" class="error-message">
        <div *ngIf="kmInput.errors?.['required']">A quilometragem é obrigatória.</div>
        <div *ngIf="kmInput.errors?.['min']">A quilometragem não pode ser negativa.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select id="status" name="status" [(ngModel)]="veiculo.status" required>
        <option value="DISPONIVEL">Disponível</option>
        <option value="INATIVO">Inativo</option>
      </select>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="vehicleForm.invalid" class="btn-primary">Salvar</button>
      <button type="button" routerLink="/admin/dashboard" class="btn-secondary">Cancelar</button>
    </div>

  </form>
</div>